#ifndef __CRITICAL_HPP__
#define __CRITICAL_HPP__

#include <arch/general/critical.hpp>
#include <cassert>

#define AssertCritical() assert(::OS::IgnoreCriticality() || \
  ::OS::GetCritical())
#define AssertNoncritical() assert(::OS::IgnoreCriticality() || \
  !::OS::GetCritical())

namespace OS {

class ScopeCritical {
private:
  bool wasCritical;

public:
  ScopeCritical(); // @ambicritical (x)
  ~ScopeCritical(); // @critical -> @ambicritical (x)
};

}

#endif
